(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function w(){return Math.random()*80-40}function L(e){const t=new THREE.PlaneGeometry(100,100),n=new THREE.MeshStandardMaterial({color:3497531}),i=new THREE.Mesh(t,n);i.rotation.x=-Math.PI/2,e.add(i);for(let o=0;o<30;o++)C(e,w(),w(),Math.random()*3+2);for(let o=0;o<15;o++)A(e,w(),w())}function C(e,t,n,i){const o=new THREE.PlaneGeometry(i,i),s=new THREE.MeshStandardMaterial({color:8190976}),r=new THREE.Mesh(o,s);r.rotation.x=-Math.PI/2,r.position.set(t,.01,n),e.add(r)}function A(e,t,n){const i=new THREE.Mesh(new THREE.BoxGeometry(.5,2,.5),new THREE.MeshStandardMaterial({color:9127187}));i.position.set(t,1,n),e.add(i);const o=new THREE.Mesh(new THREE.BoxGeometry(2,2,2),new THREE.MeshStandardMaterial({color:2263842}));o.position.set(t,3,n),e.add(o)}function F(e){const t=new THREE.Mesh(new THREE.PlaneGeometry(10,120),new THREE.MeshStandardMaterial({color:4286945}));t.rotation.x=-Math.PI/2,t.position.set(20,.05,0),e.add(t)}function u(e,t,n,i,o=0,s=0,r=0){const m=new THREE.BoxGeometry(e,t,n),d=new THREE.MeshStandardMaterial({color:i}),l=new THREE.Mesh(m,d);return l.position.set(o,s,r),l}function I(e){const t=new THREE.Group,n=new THREE.Shape;n.moveTo(0,0),n.lineTo(.05,.6),n.bezierCurveTo(.1,.8,.2,.9,.3,.7),n.lineTo(.4,.3),n.lineTo(.3,0),n.lineTo(0,0);const i={steps:1,depth:.02,bevelEnabled:!0,bevelThickness:.01,bevelSize:.01,bevelSegments:1},o=new THREE.ExtrudeGeometry(n,i),s=new THREE.MeshStandardMaterial({color:2280482,metalness:.8,roughness:.2}),r=new THREE.Mesh(o,s),m=new THREE.CylinderGeometry(.03,.03,.2,8),d=new THREE.MeshStandardMaterial({color:9127187,metalness:.3,roughness:.8}),l=new THREE.Mesh(m,d);l.position.set(0,-.1,0),l.rotation.x=Math.PI/2;const P=new THREE.BoxGeometry(.15,.03,.06),G=new THREE.MeshStandardMaterial({color:16766720,metalness:.8,roughness:.2}),H=new THREE.Mesh(P,G);return H.position.set(0,0,0),t.add(r),t.add(l),t.add(H),t.rotation.z=Math.PI/6,t.rotation.y=Math.PI/2,t.position.set(.2,0,.1),t.scale.set(1.25,1.25,1.25),e.add(t),t}function W(e){const t=new THREE.Group,n=new THREE.Mesh(new THREE.CircleGeometry(.06,16),new THREE.MeshBasicMaterial({color:0}));n.position.set(-.2,.1,.5);const i=new THREE.Mesh(new THREE.CircleGeometry(.06,16),new THREE.MeshBasicMaterial({color:0}));i.position.set(.2,.1,.5);const o=new THREE.Group,s=new THREE.BufferGeometry,m=new THREE.QuadraticBezierCurve3(new THREE.Vector3(-.2,-.1,.5),new THREE.Vector3(0,-.2,.5),new THREE.Vector3(.2,-.1,.5)).getPoints(20);s.setFromPoints(m);const d=new THREE.Line(s,new THREE.LineBasicMaterial({color:0,linewidth:3}));return o.add(d),o.position.set(0,-.1,0),d.position.set(0,.1,0),t.add(n),t.add(i),t.add(o),e.add(t),t}function B(e){e.movementState!=="idle"&&(e.armRotation=0,e.movementState="idle")}function j(e){e.jumping||(e.jumping=!0,e.velocity=e.jumpForce,e.movementState="jumping")}function z(e){if(e.isSlashing)return;e.isSlashing=!0;const n=e.head.children[0].children[2];e.originalSmileRotation=n.rotation.z,new TWEEN.Tween(n.rotation).to({z:Math.PI},300).start();const i=new TWEEN.Tween(e.arms.right.rotation).to({x:-Math.PI*.5,y:Math.PI*.25},150).easing(TWEEN.Easing.Back.Out).chain(new TWEEN.Tween(e.arms.right.rotation).to({x:-Math.PI*.25,y:-Math.PI*.5},200).easing(TWEEN.Easing.Cubic.Out).chain(new TWEEN.Tween(e.arms.right.rotation).to({x:0,y:0},300).easing(TWEEN.Easing.Quadratic.InOut).onComplete(()=>{e.isSlashing=!1,n.rotation.z=0,n.updateMatrix()}))).start();e.slashTween=i}function N(e,t){switch(e.jumping&&(e.group.position.y+=e.velocity,e.velocity-=e.gravity,e.group.position.y<=1&&(e.group.position.y=1,e.jumping=!1,e.velocity=0,e.movementState==="jumping"&&(e.movementState="idle"))),e.movementState){case"walking":e.armRotation+=e.animationSpeed;const n=Math.sin(e.armRotation)*.5;e.arms.left.rotation.x=-n,e.isSlashing||(e.arms.right.rotation.x=n),e.legs.left.rotation.x=n,e.legs.right.rotation.x=-n;break;case"idle":const i=Math.sin(Date.now()*.008)*.08;e.body.position.y=.75+i,e.head.position.y=1.8+i*.5,e.arms.left.rotation.x=0,e.isSlashing||(e.arms.right.rotation.x=0),e.legs.left.rotation.x=0,e.legs.right.rotation.x=0;break;case"jumping":e.arms.left.rotation.x=-.5,e.isSlashing||(e.arms.right.rotation.x=-.5);break}}function O(e){const t={group:new THREE.Group,speed:.15,turnSpeed:.03,jumpForce:.3,jumping:!1,velocity:0,gravity:.01,health:100,movementState:"idle",animationSpeed:.2,armRotation:0,isSlashing:!1,slashTween:null,originalFaceRotation:0};return t.body=u(1,1.5,.5,3355647),t.body.position.y=.75,t.group.add(t.body),t.head=u(.8,.8,.8,16767916),t.head.position.y=1.8,t.group.add(t.head),W(t.head),t.arms={left:u(.25,1,.25,3355647,-.625,.75),right:u(.25,1,.25,3355647,.625,.75)},t.group.add(t.arms.left,t.arms.right),t.legs={left:u(.25,1,.25,102,-.25,-.25),right:u(.25,1,.25,102,.25,-.25)},t.group.add(t.legs.left,t.legs.right),t.group.position.y=1,e.add(t.group),B(t),I(t.arms.right),t}typeof window.keys>"u"&&(window.keys={w:!1,a:!1,s:!1,d:!1,left:!1,right:!1,space:!1,q:!1});let y=!1,T=!1,f={x:0,y:0},p=0,g=5,R=10,E=!0,c={x:0,y:0};function D(e){window.addEventListener("keydown",t=>{const n=t.key.toLowerCase();keys.hasOwnProperty(n)&&(keys[n]=!0),t.key==="ArrowLeft"&&(keys.left=!0),t.key==="ArrowRight"&&(keys.right=!0),t.key===" "&&(keys.space=!0),t.key.toLowerCase()==="q"&&!e.isSlashing&&z(e)}),window.addEventListener("keyup",t=>{const n=t.key.toLowerCase();keys.hasOwnProperty(n)&&(keys[n]=!1),t.key==="ArrowLeft"&&(keys.left=!1),t.key==="ArrowRight"&&(keys.right=!1),t.key===" "&&(keys.space=!1)}),window.addEventListener("mousedown",t=>{y=!0,T=t.button===2,f.x=t.clientX,f.y=t.clientY,t.button===0&&(E=!1)}),window.addEventListener("mouseup",t=>{y=!1,t.button===0&&(E=!0)}),window.addEventListener("mousemove",t=>{y&&(c={x:t.clientX-f.x,y:t.clientY-f.y},T?(e.group.rotation.y-=c.x*.01,E=!0):(p-=c.x*.01,g=Math.max(2,Math.min(15,g+c.y*.05)),E=!1),f.x=t.clientX,f.y=t.clientY)}),window.addEventListener("contextmenu",t=>t.preventDefault())}function V(e,t){const n=new THREE.Vector3(0,0,-1).applyAxisAngle(new THREE.Vector3(0,1,0),e.group.rotation.y),i=new THREE.Vector3(1,0,0).applyAxisAngle(new THREE.Vector3(0,1,0),e.group.rotation.y),o=keys.w||keys.a||keys.s||keys.d;let s=new THREE.Vector3(0,0,0);keys.w&&s.add(n.clone().multiplyScalar(e.speed*t)),keys.s&&s.add(n.clone().negate().multiplyScalar(e.speed*t)),keys.a&&s.add(i.clone().negate().multiplyScalar(e.speed*t)),keys.d&&s.add(i.clone().multiplyScalar(e.speed*t)),e.group.position.add(s),o?e.movementState="walking":e.jumping||(e.movementState="idle");const r=e.turnSpeed*2;keys.left&&(e.group.rotation.y+=r*t),keys.right&&(e.group.rotation.y-=r*t),keys.space&&j(e),E&&(o||keys.left||keys.right||T)&&q(e),N(e)}function q(e){p=e.group.rotation.y,g=5,R=10}typeof window.scene>"u"&&(window.scene=new THREE.Scene,scene.background=new THREE.Color(8900331));typeof window.camera>"u"&&(window.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),camera.position.set(0,5,10),camera.lookAt(0,0,0));typeof window.renderer>"u"&&(window.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!1,powerPreference:"high-performance",preserveDrawingBuffer:!0}),renderer.setSize(window.innerWidth,window.innerHeight),renderer.shadowMap.enabled=!0,document.body.appendChild(renderer.domElement));const X=new THREE.AmbientLight(4210752);scene.add(X);const M=new THREE.DirectionalLight(16777215,1);M.position.set(5,5,5);M.castShadow=!0;scene.add(M);L(scene);F(scene);const a=O(scene);D(a);function Y(){const e=Math.sin(p)*R,t=Math.cos(p)*R;camera.position.set(a.group.position.x+e,a.group.position.y+g,a.group.position.z+t),camera.lookAt(a.group.position.x,a.group.position.y+1,a.group.position.z)}const Q=60,x=1e3/Q;let S=performance.now(),h=0,v=performance.now(),k=0;function b(){requestAnimationFrame(b);const e=performance.now(),t=e-S;t>=x&&(S=e-t%x,V(a,1),Y(),TWEEN.update(),renderer.render(scene,camera),h++,e-v>=1e3&&(k=h,h=0,v=e,console.log(`FPS: ${k}`)))}window.addEventListener("resize",()=>{camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)});b();
