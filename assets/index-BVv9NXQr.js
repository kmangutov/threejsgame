(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();function E(){return Math.random()*80-40}class z{constructor(e={}){const{height:o=5,trunkRadius:s=.2,trunkHeight:n=o*.6,foliageRadius:i=2,foliageHeight:r=o*.7,barkColor:a="#3d2817",leafColor:d="#2d5a27",windEffect:u=!0}=e;this.group=new THREE.Group,this.leaves=[],this.initialLeafPositions=[],this.time=0;const l=new THREE.CylinderGeometry(s,s*1.2,n,8),m=new THREE.MeshStandardMaterial({color:a,roughness:.9,metalness:.1,wireframe:!1});this.trunk=new THREE.Mesh(l,m),this.trunk.castShadow=!0,this.trunk.receiveShadow=!0,this.trunk.position.y=n/2,this.group.add(this.trunk);const g=new THREE.ConeGeometry(i*.7,r,8),A=new THREE.MeshStandardMaterial({color:d,roughness:.8,metalness:.1,side:THREE.DoubleSide}),I=3;for(let y=0;y<I;y++){const f=new THREE.Mesh(g,A);f.position.y=n-y*r*.3,f.scale.setScalar(1-y*.2),f.castShadow=!0,f.receiveShadow=!0,this.leaves.push(f),this.initialLeafPositions.push(f.position.clone()),this.group.add(f)}}update(e){}}class F{static createBush(e={}){const{radius:o=1,height:s=1.5,color:n="#1a472a"}=e,i=new THREE.Group,r=5;for(let a=0;a<r;a++){const d=new THREE.SphereGeometry(o*(.7+Math.random()*.3),8,8),u=new THREE.MeshStandardMaterial({color:new THREE.Color(n).offsetHSL(0,0,Math.random()*.2-.1),roughness:.8,metalness:.1}),l=new THREE.Mesh(d,u),m=a/r*Math.PI*2;l.position.x=Math.cos(m)*(o*.3),l.position.z=Math.sin(m)*(o*.3),l.position.y=s*(.5+Math.random()*.3),l.scale.setScalar(.8+Math.random()*.4),l.castShadow=!0,l.receiveShadow=!0,i.add(l)}return i}static createGrass(e={}){const{width:o=.1,height:s=.3,color:n="#3a5f0b"}=e,i=new THREE.Group,r=5;for(let a=0;a<r;a++){const d=new THREE.Mesh(new THREE.PlaneGeometry(o,s),new THREE.MeshStandardMaterial({color:new THREE.Color(n).offsetHSL(0,0,Math.random()*.2-.1),side:THREE.DoubleSide,transparent:!0,alphaTest:.5}));d.position.x=(Math.random()-.5)*o*2,d.position.z=(Math.random()-.5)*o*2,d.rotation.y=Math.random()*Math.PI,d.rotation.x=Math.random()*.2,i.add(d)}return i}}class B{static create(){const e=new THREE.Shape;e.moveTo(15,-60),e.quadraticCurveTo(25,-20,20,0),e.quadraticCurveTo(15,20,25,60),e.lineTo(30,60),e.quadraticCurveTo(20,20,25,0),e.quadraticCurveTo(30,-20,20,-60),e.closePath();const o=new THREE.ShapeGeometry(e),s=new THREE.MeshBasicMaterial({color:4286945,transparent:!0,opacity:.8}),n=new THREE.Mesh(o,s);return n.rotation.x=-Math.PI/2,n.position.y=.001,n}}function W(t){const e=new THREE.PlaneGeometry(100,100),o=new THREE.MeshStandardMaterial({color:3825419,roughness:.8,metalness:.1}),s=new THREE.Mesh(e,o);s.rotation.x=-Math.PI/2,s.receiveShadow=!0,s.position.y=0,t.add(s);for(let n=0;n<8;n++){const i=new THREE.PlaneGeometry(4,6),r=new THREE.MeshBasicMaterial({color:14329120}),a=new THREE.Mesh(i,r);a.rotation.x=-Math.PI/2,a.position.set(E()*.7,.001,E()*.7),a.rotation.y=Math.random()*Math.PI,t.add(a)}for(let n=0;n<20;n++){const i=E(),r=E(),a=4+Math.random()*3,d=new z({height:a,trunkRadius:.15+Math.random()*.1,barkColor:"#3d2817",leafColor:Math.random()>.5?"#2d5a27":"#1f4f19"});d.group.position.set(i,0,r),d.group.rotation.y=Math.random()*Math.PI*2,t.add(d.group)}for(let n=0;n<30;n++){const i=E(),r=E(),a=F.createBush({radius:.5+Math.random()*.5,height:.8+Math.random()*.4,color:Math.random()>.5?"#1a472a":"#2d5a27"});a.position.set(i,0,r),t.add(a)}}function j(t){const e=B.create();t.add(e)}function h(t,e,o,s,n=0,i=0,r=0){const a=new THREE.BoxGeometry(t,e,o),d=new THREE.MeshStandardMaterial({color:s}),u=new THREE.Mesh(a,d);return u.position.set(n,i,r),u}function N(t){const e=new THREE.Group,o=new THREE.Shape;o.moveTo(0,0),o.lineTo(.05,.6),o.bezierCurveTo(.1,.8,.2,.9,.3,.7),o.lineTo(.4,.3),o.lineTo(.3,0),o.lineTo(0,0);const s={steps:1,depth:.02,bevelEnabled:!0,bevelThickness:.01,bevelSize:.01,bevelSegments:1},n=new THREE.ExtrudeGeometry(o,s),i=new THREE.MeshStandardMaterial({color:2280482,metalness:.8,roughness:.2}),r=new THREE.Mesh(n,i),a=new THREE.CylinderGeometry(.03,.03,.2,8),d=new THREE.MeshStandardMaterial({color:9127187,metalness:.3,roughness:.8}),u=new THREE.Mesh(a,d);u.position.set(0,-.1,0),u.rotation.x=Math.PI/2;const l=new THREE.BoxGeometry(.15,.03,.06),m=new THREE.MeshStandardMaterial({color:16766720,metalness:.8,roughness:.2}),g=new THREE.Mesh(l,m);return g.position.set(0,0,0),e.add(r),e.add(u),e.add(g),e.rotation.z=Math.PI/6,e.rotation.y=Math.PI/2,e.position.set(.2,0,.1),e.scale.set(1.25,1.25,1.25),t.add(e),e}function O(t){const e=new THREE.Group,o=new THREE.Mesh(new THREE.CircleGeometry(.06,16),new THREE.MeshBasicMaterial({color:0}));o.position.set(-.2,.1,.5);const s=new THREE.Mesh(new THREE.CircleGeometry(.06,16),new THREE.MeshBasicMaterial({color:0}));s.position.set(.2,.1,.5);const n=new THREE.Group,i=new THREE.BufferGeometry,a=new THREE.QuadraticBezierCurve3(new THREE.Vector3(-.2,-.1,.5),new THREE.Vector3(0,-.2,.5),new THREE.Vector3(.2,-.1,.5)).getPoints(20);i.setFromPoints(a);const d=new THREE.Line(i,new THREE.LineBasicMaterial({color:0,linewidth:3}));return n.add(d),n.position.set(0,-.1,0),d.position.set(0,.1,0),e.add(o),e.add(s),e.add(n),t.add(e),e}function D(t){t.movementState!=="idle"&&(t.armRotation=0,t.movementState="idle")}function V(t){t.jumping||(t.jumping=!0,t.velocity=t.jumpForce,t.movementState="jumping")}function q(t){if(t.isSlashing)return;t.isSlashing=!0;const o=t.head.children[0].children[2];t.originalSmileRotation=o.rotation.z,new TWEEN.Tween(o.rotation).to({z:Math.PI},300).start();const s=new TWEEN.Tween(t.arms.right.rotation).to({x:-Math.PI*.5,y:Math.PI*.25},150).easing(TWEEN.Easing.Back.Out).chain(new TWEEN.Tween(t.arms.right.rotation).to({x:-Math.PI*.25,y:-Math.PI*.5},200).easing(TWEEN.Easing.Cubic.Out).chain(new TWEEN.Tween(t.arms.right.rotation).to({x:0,y:0},300).easing(TWEEN.Easing.Quadratic.InOut).onComplete(()=>{t.isSlashing=!1,o.rotation.z=0,o.updateMatrix()}))).start();t.slashTween=s}function X(t,e){switch(t.jumping&&(t.group.position.y+=t.velocity,t.velocity-=t.gravity,t.group.position.y<=1&&(t.group.position.y=1,t.jumping=!1,t.velocity=0,t.movementState==="jumping"&&(t.movementState="idle"))),t.movementState){case"walking":t.armRotation+=t.animationSpeed;const o=Math.sin(t.armRotation)*.5;t.arms.left.rotation.x=-o,t.isSlashing||(t.arms.right.rotation.x=o),t.legs.left.rotation.x=o,t.legs.right.rotation.x=-o;break;case"idle":const s=Math.sin(Date.now()*.008)*.08;t.body.position.y=.75+s,t.head.position.y=1.8+s*.5,t.arms.left.rotation.x=0,t.isSlashing||(t.arms.right.rotation.x=0),t.legs.left.rotation.x=0,t.legs.right.rotation.x=0;break;case"jumping":t.arms.left.rotation.x=-.5,t.isSlashing||(t.arms.right.rotation.x=-.5);break}}function Y(t){const e={group:new THREE.Group,speed:.15,turnSpeed:.03,jumpForce:.3,jumping:!1,velocity:0,gravity:.01,health:100,movementState:"idle",animationSpeed:.2,armRotation:0,isSlashing:!1,slashTween:null,originalFaceRotation:0};return e.body=h(1,1.5,.5,3355647),e.body.position.y=.75,e.group.add(e.body),e.head=h(.8,.8,.8,16767916),e.head.position.y=1.8,e.group.add(e.head),O(e.head),e.arms={left:h(.25,1,.25,3355647,-.625,.75),right:h(.25,1,.25,3355647,.625,.75)},e.group.add(e.arms.left,e.arms.right),e.legs={left:h(.25,1,.25,102,-.25,-.25),right:h(.25,1,.25,102,.25,-.25)},e.group.add(e.legs.left,e.legs.right),e.group.position.y=1,t.add(e.group),D(e),N(e.arms.right),e}typeof window.keys>"u"&&(window.keys={w:!1,a:!1,s:!1,d:!1,left:!1,right:!1,space:!1,q:!1});let H=!1,v=!1,p={x:0,y:0},T=0,R=5,x=10,w=!0,M={x:0,y:0};function Q(t){window.addEventListener("keydown",e=>{const o=e.key.toLowerCase();keys.hasOwnProperty(o)&&(keys[o]=!0),e.key==="ArrowLeft"&&(keys.left=!0),e.key==="ArrowRight"&&(keys.right=!0),e.key===" "&&(keys.space=!0),e.key.toLowerCase()==="q"&&!t.isSlashing&&q(t)}),window.addEventListener("keyup",e=>{const o=e.key.toLowerCase();keys.hasOwnProperty(o)&&(keys[o]=!1),e.key==="ArrowLeft"&&(keys.left=!1),e.key==="ArrowRight"&&(keys.right=!1),e.key===" "&&(keys.space=!1)}),window.addEventListener("mousedown",e=>{H=!0,v=e.button===2,p.x=e.clientX,p.y=e.clientY,e.button===0&&(w=!1)}),window.addEventListener("mouseup",e=>{H=!1,e.button===0&&(w=!0)}),window.addEventListener("mousemove",e=>{H&&(M={x:e.clientX-p.x,y:e.clientY-p.y},v?(t.group.rotation.y-=M.x*.01,w=!0):(T-=M.x*.01,R=Math.max(2,Math.min(15,R+M.y*.05)),w=!1),p.x=e.clientX,p.y=e.clientY)}),window.addEventListener("contextmenu",e=>e.preventDefault())}function _(t,e){const o=new THREE.Vector3(0,0,-1).applyAxisAngle(new THREE.Vector3(0,1,0),t.group.rotation.y),s=new THREE.Vector3(1,0,0).applyAxisAngle(new THREE.Vector3(0,1,0),t.group.rotation.y),n=keys.w||keys.a||keys.s||keys.d;let i=new THREE.Vector3(0,0,0);keys.w&&i.add(o.clone().multiplyScalar(t.speed*e)),keys.s&&i.add(o.clone().negate().multiplyScalar(t.speed*e)),keys.a&&i.add(s.clone().negate().multiplyScalar(t.speed*e)),keys.d&&i.add(s.clone().multiplyScalar(t.speed*e)),t.group.position.add(i),n?t.movementState="walking":t.jumping||(t.movementState="idle");const r=t.turnSpeed*2;keys.left&&(t.group.rotation.y+=r*e),keys.right&&(t.group.rotation.y-=r*e),keys.space&&V(t),w&&(n||keys.left||keys.right||v)&&J(t),X(t)}function J(t){T=t.group.rotation.y,R=5,x=10}typeof window.scene>"u"&&(window.scene=new THREE.Scene,scene.background=new THREE.Color(8900331));typeof window.camera>"u"&&(window.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),camera.position.set(0,5,10),camera.lookAt(0,0,0));typeof window.renderer>"u"&&(window.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!1,powerPreference:"high-performance",preserveDrawingBuffer:!0}),renderer.setSize(window.innerWidth,window.innerHeight),renderer.shadowMap.enabled=!0,document.body.appendChild(renderer.domElement));const K=new THREE.AmbientLight(4210752);scene.add(K);const k=new THREE.DirectionalLight(16777215,1);k.position.set(5,5,5);k.castShadow=!0;scene.add(k);W(scene);j(scene);const c=Y(scene);Q(c);function U(){const t=Math.sin(T)*x,e=Math.cos(T)*x;camera.position.set(c.group.position.x+t,c.group.position.y+R,c.group.position.z+e),camera.lookAt(c.group.position.x,c.group.position.y+1,c.group.position.z)}const $=60,b=1e3/$;let G=performance.now(),S=0,P=performance.now(),C=0;function L(){requestAnimationFrame(L);const t=performance.now(),e=t-G;e>=b&&(G=t-e%b,_(c,1),U(),TWEEN.update(),renderer.render(scene,camera),S++,t-P>=1e3&&(C=S,S=0,P=t,console.log(`FPS: ${C}`)))}window.addEventListener("resize",()=>{camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)});L();
